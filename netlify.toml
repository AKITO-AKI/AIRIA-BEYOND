# Netlify deployment config for the monorepo.
# Publishes the Vite app under apps/web/dist.

[build]
  command = "npm install && npm -w apps/web run build"
  publish = "apps/web/dist"

[build.environment]
  NODE_VERSION = "20"
  # Custom domain deployments should use the root base path.
  VITE_PUBLIC_BASE_PATH = "/"
  # Default backend API for Netlify builds. Can be overridden in Netlify UI env vars.
  VITE_API_BASE_URL = "https://airia-beyond.onrender.com"

# SPA fallback (direct links should work)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
